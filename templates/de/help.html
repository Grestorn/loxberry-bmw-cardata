<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BMW CarData Plugin - Hilfe</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.5; padding: 10px; font-size: 13px; }
        h1 { color: #0066cc; font-size: 16px; margin: 0 0 10px 0; padding-bottom: 5px; border-bottom: 2px solid #0066cc; }
        h2 { color: #333; font-size: 14px; margin: 15px 0 8px 0; }
        p { margin: 8px 0; }
        ul, ol { margin: 5px 0; padding-left: 20px; }
        li { margin: 4px 0; }
        code { background: #f4f4f4; padding: 1px 4px; border-radius: 2px; font-family: monospace; font-size: 12px; }
        .info { background: #e7f3ff; border-left: 3px solid #0066cc; padding: 8px; margin: 8px 0; font-size: 12px; }
        .warning { background: #fff3cd; border-left: 3px solid #ff9800; padding: 8px; margin: 8px 0; font-size: 12px; }
        a { color: #0066cc; }
    </style>
</head>
<body>
    <h1>BMW CarData Plugin</h1>

    <div class="info">
        <strong>üìñ Vollst√§ndige Dokumentation:</strong><br>
        <a href="https://github.com/Grestorn/loxberry-bmw-cardata/blob/main/README.md" target="_blank">GitHub README</a>
    </div>

    <h2>Schnellstart</h2>

    <p><strong>1. BMW CarData Client erstellen</strong></p>
    <ul>
        <li>√ñffne <a href="https://www.bmw.de/de-de/mybmw/vehicle-overview" target="_blank">MyBMW Fahrzeug√ºbersicht</a></li>
        <li>W√§hle Fahrzeug ‚Üí "CarData Client erstellen"</li>
        <li>Kopiere die <strong>Client-ID</strong></li>
        <li>Aktiviere: "CarData Stream" + "Zugang zur CarData API"</li>
    </ul>

    <div class="warning">
        ‚ö†Ô∏è <strong>Nicht</strong> auf "Ger√§t authentifizieren" dr√ºcken!
    </div>

    <p><strong>2. Stream-Benutzername ermitteln</strong></p>
    <ul>
        <li>Scrolle zu "CarData Streaming"</li>
        <li>"Datenstream konfigurieren" ‚Üí "Verbindungsdetails anzeigen"</li>
        <li>Kopiere den <strong>Benutzernamen</strong></li>
    </ul>

    <p><strong>3. Daten ausw√§hlen</strong></p>
    <ul>
        <li>"Datenauswahl √§ndern"</li>
        <li>Nur ben√∂tigte Werte ausw√§hlen</li>
        <li>"Absenden und Stream starten"</li>
    </ul>

    <p><strong>4. Plugin konfigurieren</strong></p>
    <ul>
        <li>Client-ID eintragen</li>
        <li>Stream Host: <code>customer.streaming-cardata.bmwgroup.com</code></li>
        <li>Stream Port: <code>9000</code></li>
        <li>Stream Benutzername eintragen</li>
        <li>"Konfiguration speichern"</li>
    </ul>

    <p><strong>5. Anmeldung durchf√ºhren</strong></p>
    <ul>
        <li>"Registrierung starten"</li>
        <li>"Zur BMW Anmeldung" ‚Üí Mit BMW-ID anmelden</li>
        <li>"Tokens abrufen"</li>
    </ul>

    <h2>MQTT Topics</h2>
    <p>Format: <code>&lt;prefix&gt;/&lt;VIN&gt;/&lt;attribut&gt;</code></p>
    <p>Beispiel:<br>
    <code>bmw/WBA1234.../data/vehicle.powertrain.electric.battery.chargeLevel.percent/value</code></p>

    <div class="warning">
        ‚ö†Ô∏è BMW sendet nur bei √Ñnderungen Daten. Zum Testen Fahrzeug √∂ffnen.
    </div>

    <h2>Loxone Integration</h2>
    <ul>
        <li>LoxBerry MQTT Gateway √∂ffnen</li>
        <li>Subscription hinzuf√ºgen: <code>bmw/#</code></li>
        <li>Anleitung: <a href="https://wiki.loxberry.de/konfiguration/widget_help/widget_mqtt/mqtt_gateway/mqtt_schritt_fur_schritt_mqtt_loxone" target="_blank">MQTT Schritt f√ºr Schritt</a></li>
    </ul>

    <h2>Fehlerbehebung</h2>

    <p><strong>Anmeldung schl√§gt fehl:</strong></p>
    <ul>
        <li>Client-ID und Benutzername pr√ºfen</li>
        <li>Logs auf "Protokolle"-Tab pr√ºfen</li>
    </ul>

    <p><strong>Bridge startet nicht:</strong></p>
    <ul>
        <li>Status muss "Authentifiziert" sein</li>
        <li>"Token manuell aktualisieren" klicken</li>
    </ul>

    <p><strong>Keine Daten in Loxone:</strong></p>
    <ul>
        <li>Bridge-Status pr√ºfen</li>
        <li>Daten im BMW Portal ausgew√§hlt?</li>
        <li>Bridge-Logs pr√ºfen (Anzahl Nachrichten)</li>
        <li>Fahrzeug √∂ffnen zum Testen</li>
    </ul>

    <h2>FAQ</h2>

    <p><strong>Wie lange ist die Anmeldung g√ºltig?</strong><br>
    Max. 2 Wochen, automatische Erneuerung alle 10 Min.</p>

    <p><strong>Separate Konfiguration pro Fahrzeug?</strong><br>
    Nein! Stream enth√§lt automatisch alle Fahrzeuge.</p>

    <p><strong>Was passiert bei LoxBerry-Neustart?</strong><br>
    Bridge startet automatisch beim Systemstart.</p>

</body>
</html>
